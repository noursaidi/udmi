#!/bin/bash -e

PROJECT_ID=$1
shift 1

SITE_PATH=sites/udmi_site_model
DEVICE_ID=AHU-1

RESULTS_OUT=/tmp/sequencer_solo.out
PUBBER_OUT=/tmp/pubber.log
SEQUENCER_OUT=/tmp/sequencer.log
TEST_LIST=/tmp/solo_sequencer_tests.txt

cat > $TEST_LIST <<EOF
writeback_success_state noWriteback
writeback_success_apply noPointState
# last line hacky fix for github actions
EOF

rm -f $RESULTS_OUT $SEQUENCER_OUT $PUBBER_OUT 
touch $RESULTS_OUT $SEQUENCER_OUT $PUBBER_OUT 

while read test_name pubber_opts; do
    echo $test_name $pubber_opts

done < $TEST_LIST

cat $RESULTS_OUT
exit 1